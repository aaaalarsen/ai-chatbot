# 🎯 AI チャットボット システム 使用ガイド

## 📋 概要

このシステムは、銀行ATMサービス向けの多言語対応音声チャットボットです。管理画面でコンテンツを編集し、音声ファイルを生成して、本番環境にワンクリックでデプロイできます。

## 🚀 基本的な使い方

### 1. アプリケーション起動

#### ワンクリック起動（推奨）
- **Windows**: `start-chatbot.bat` をダブルクリック
- **macOS/Linux**: `./start-chatbot.sh` を実行

#### 手動起動
```bash
cd ai-chatbot
npm run dev
```

アプリケーションが `http://localhost:3000` で起動します。

### 2. 画面の種類

- **チャット画面**: `http://localhost:3000` - エンドユーザー向けATMアシスタント
- **管理画面**: `http://localhost:3000/management` - コンテンツ管理・デプロイ画面

## 🛠️ 管理画面の使い方

### 基本機能

1. **コンテンツ管理**タブ
   - 店舗名・バージョン情報の編集
   - 日本語・英語メッセージの編集
   - 取引フローのカスタマイズ

2. **音声生成**タブ
   - VOICEVOX連携による音声ファイル生成
   - 音声プレビュー・テスト機能
   - 一括音声生成

3. **デプロイ**タブ
   - Vercel設定（Access Token、プロジェクト名）
   - 接続テスト機能
   - ワンクリック本番デプロイ

### 🎤 音声ファイル生成の手順

#### 事前準備: VOICEVOXの設定

1. [VOICEVOX公式サイト](https://voicevox.hiroshiba.jp/)から最新版をダウンロード・インストール
2. VOICEVOXを起動
3. 「エンジン」メニューから「HTTP サーバーを起動」を有効にする
4. 管理画面の「音声生成」タブで接続確認

#### ステップ 1: 音声生成

1. 管理画面の「音声生成」タブを開く
2. **VOICEVOX接続状況**を確認（✅ 接続済み であることを確認）
3. **音声ファイルを生成**ボタンをクリック
4. 生成進捗が表示され、完了まで待機

#### ステップ 2: 音声確認

1. 生成完了後、各音声ファイルの再生テストが可能
2. `public/audio/ja/` フォルダに `.wav` ファイルが保存される
3. チャット画面で実際の音声を確認

#### ステップ 3: コンテンツカスタマイズ（オプション）

1. 「コンテンツ管理」タブでメッセージテキストを編集
2. 変更後、再度音声生成を実行
3. カスタマイズされた音声でチャットボットが動作

## 🚀 本番環境へのデプロイ

### 事前準備: Vercelアカウント

1. [Vercel](https://vercel.com/)でアカウント作成（GitHubアカウント推奨）
2. [Settings → Tokens](https://vercel.com/account/tokens) でAccess Token作成
3. Tokenをコピーして保存

### デプロイ手順

1. **設定入力**
   - 管理画面の「デプロイ」タブを開く
   - Access Token を入力
   - プロジェクト名を入力（英数字とハイフンのみ）

2. **接続テスト**
   - 「接続テスト」ボタンで動作確認
   - ✅ 接続成功 が表示されることを確認

3. **デプロイ実行**
   - 「設定を保存」をクリック
   - 「🚀 Vercelにデプロイ」ボタンをクリック
   - 数分でデプロイ完了、本番URLが表示される

### デプロイされる内容

- ✅ **チャットボットアプリ**: 完全機能版
- ✅ **音声ファイル**: 生成済み音声データ
- ✅ **設定**: カスタマイズ内容
- ❌ **管理画面**: セキュリティ上除外

## 💾 ファイル管理

### 音声ファイルの保存場所

```
public/audio/ja/
├── start_3.wav              # 開始メッセージ
├── language_selection_3.wav # 言語選択
├── transaction_type_3.wav   # 取引タイプ選択
├── deposit_amount_3.wav     # 預金金額入力
├── transfer_amount_3.wav    # 送金金額入力
├── payout_amount_3.wav      # 出金金額入力
└── [その他の音声ファイル].wav
```

### 設定ファイル

- `configuration.json`: メイン設定ファイル
- `public/configuration.json`: 本番用設定ファイル（デプロイ時に更新）

## 🐛 トラブルシューティング

### アプリが起動しない

**症状**: `start-chatbot.bat` 実行時にエラー

**解決方法**:
1. Node.js 18.0以上がインストールされているか確認
2. `npm clean-install` で依存関係を再インストール
3. ポート3000が他のアプリで使用されていないか確認

### 管理画面にアクセスできない

**症状**: http://localhost:3000/management が404エラー

**解決方法**:
1. `.env.local` に `ENABLE_MANAGEMENT=true` を設定
2. 開発サーバーを再起動
3. 本番環境では管理画面は意図的に無効化されている

### VOICEVOX接続エラー

**症状**: 音声生成で「❌ 接続エラー」表示

**解決方法**:
1. VOICEVOXアプリケーションを起動
2. 「エンジン」→「HTTP サーバーを起動」を有効にする
3. ファイアウォールでポート50021の通信を許可
4. VOICEVOXのバージョンが最新か確認

### デプロイエラー

**症状**: Vercelデプロイが失敗

**解決方法**:
1. **Access Token確認**: 正しくコピーされているか、有効期限内か
2. **プロジェクト名確認**: 英数字とハイフンのみ、63文字以内
3. **音声ファイル確認**: 事前にVOICEVOXで音声生成が完了しているか
4. **インターネット接続**: 安定した接続環境か確認

### 本番環境で音声が再生されない

**症状**: デプロイ後、チャットボットで音声が出ない

**解決方法**:
1. ブラウザで音声再生許可を確認
2. HTTPS環境でアクセスしているか確認
3. 音声ファイルが正しくデプロイされているか確認

## 📱 動作環境

### 推奨システム環境

#### ローカル開発環境
- **OS**: Windows 10/11、macOS 10.15以上、Ubuntu 18.04以上
- **Node.js**: 18.0以上
- **メモリ**: 8GB以上推奨
- **ストレージ**: 5GB以上の空き容量

#### エンドユーザー環境（本番）
- **ブラウザ**: Chrome 90+、Firefox 90+、Safari 14+、Edge 90+
- **接続**: インターネット接続（音声ファイル配信用）
- **デバイス**: PC、タブレット、スマートフォン対応

### 必要な権限・設定

#### ローカル開発
- **VOICEVOX**: 音声生成用（HTTPサーバーモード）
- **ブラウザ**: 音声再生許可
- **ファイアウォール**: ポート3000、50021の通信許可

#### 本番環境
- **Vercel Account**: デプロイ用
- **HTTPS**: 音声機能の完全動作に必要

## 🔧 高度な設定

### カスタムドメイン設定（Vercel）

1. Vercelプロジェクトの「Settings」→「Domains」
2. カスタムドメインを追加
3. DNS設定でCNAMEレコードを設定

### 環境変数設定

#### ローカル開発（.env.local）
```
ENABLE_MANAGEMENT=true
NODE_ENV=development
```

#### 本番環境（Vercel自動設定）
```
ENABLE_MANAGEMENT=false
NODE_ENV=production
```

### 音声ファイルの最適化

- **形式**: WAV (16bit, 24kHz)
- **圧縮**: 音質と容量のバランス調整
- **キャッシュ**: Vercel CDNによる自動キャッシュ

## 🔒 セキュリティ

### 本番環境の保護

- **管理画面**: 完全に除外（404エラー）
- **Vercel API**: 本番環境でアクセス不可
- **Access Token**: ローカル環境のみで使用

### 推奨事項

- Access Tokenの定期的な更新
- 不要なデプロイメントの削除
- ログの定期的な確認

## 📞 サポートとフィードバック

### 技術サポート

問題が発生した場合は、以下の情報を含めてサポートに連絡：

1. **エラーメッセージ**: 正確なエラー内容
2. **環境情報**: OS、ブラウザ、Node.jsバージョン
3. **再現手順**: エラーが発生する具体的な操作
4. **ログ**: コンソールログやVercelログ

### アップデート情報

- システムの新機能や改善点
- セキュリティアップデート
- 操作方法の変更点

---

**🎯 このシステムにより、技術知識がなくても高品質なAIチャットボットを簡単に作成・運用できます。**

*このガイドは定期的に更新されます。最新版をご確認ください。*