# AIチャットボット - 使い方ガイド

## 概要

このAIチャットボットは、銀行ATMサービス向けの多言語対応音声チャットボットです。顧客は管理画面でコンテンツを編集し、音声ファイルを生成して、本番環境にワンクリックでデプロイできます。

## 📋 目次

1. [システム要件](#システム要件)
2. [初回セットアップ](#初回セットアップ)
3. [アプリケーションの起動](#アプリケーションの起動)
4. [管理画面の使用方法](#管理画面の使用方法)
5. [音声ファイルの生成](#音声ファイルの生成)
6. [本番環境へのデプロイ](#本番環境へのデプロイ)
7. [トラブルシューティング](#トラブルシューティング)

## システム要件

### 必須環境
- **Windows 10/11** または **macOS 10.15以上**
- **Node.js 18.0以上**
- **npm 8.0以上**
- **インターネット接続**

### 推奨環境
- **メモリ**: 8GB以上
- **ストレージ**: 5GB以上の空き容量
- **ブラウザ**: Chrome、Firefox、Safari、Edge（最新版）

## 初回セットアップ

### 1. プロジェクトの取得
```bash
# GitHubからクローン（または提供されたフォルダを使用）
git clone [プロジェクトURL]
cd ai-chatbot
```

### 2. 依存関係のインストール
```bash
npm install
```

### 3. 環境設定
プロジェクトルートに `.env.local` ファイルを作成：
```
ENABLE_MANAGEMENT=true
NODE_ENV=development
```

## アプリケーションの起動

### ワンクリック起動（推奨）

#### Windows
1. プロジェクトフォルダで `start-chatbot.bat` をダブルクリック
2. 自動的に依存関係をチェックし、開発サーバーが起動します
3. ブラウザが自動で開き、http://localhost:3000 にアクセスします

#### macOS/Linux
1. ターミナルでプロジェクトフォルダに移動
2. `./start-chatbot.sh` を実行
3. ブラウザで http://localhost:3000 にアクセス

### 手動起動
```bash
npm run dev
```

## 管理画面の使用方法

### アクセス方法
起動後、http://localhost:3000/management にアクセス

### 画面構成

#### 1. コンテンツ管理タブ
- **基本情報設定**
  - 店舗名の編集
  - システムバージョンの管理
  
- **言語別コンテンツ編集**
  - 日本語・英語のメッセージ編集
  - 選択肢の設定
  - 取引フローのカスタマイズ

#### 2. 音声生成タブ
- **VOICEVOX連携**
  - VOICEVOXの起動確認
  - 音声ファイルの一括生成
  - 個別音声の再生テスト

#### 3. デプロイタブ
- **Vercel設定**
  - Access Tokenの設定
  - プロジェクト名の指定
  - 接続テスト機能

### 基本的な編集フロー

1. **コンテンツ編集**
   - 「コンテンツ管理」タブでメッセージを編集
   - 「保存」ボタンでローカルに保存

2. **音声生成**
   - 「音声生成」タブに移動
   - VOICEVOXが起動していることを確認
   - 「音声ファイルを生成」ボタンをクリック

3. **プレビュー確認**
   - http://localhost:3000 でチャットボットの動作確認
   - 音声再生のテスト

## 音声ファイルの生成

### 事前準備

#### VOICEVOXのインストール
1. [VOICEVOX公式サイト](https://voicevox.hiroshiba.jp/)から最新版をダウンロード
2. インストール後、VOICEVOXを起動
3. APIサーバーモードを有効にする

### 音声生成手順

1. **VOICEVOX起動確認**
   ```
   管理画面の「音声生成」タブで接続状況を確認
   ✅ 接続済み: VOICEVOXが正常に動作中
   ❌ 接続エラー: VOICEVOXを起動してください
   ```

2. **音声ファイル生成**
   - 「音声ファイルを生成」ボタンをクリック
   - 進行状況が表示されます
   - 生成完了まで数分かかる場合があります

3. **生成確認**
   - `public/audio/ja/` フォルダに `.wav` ファイルが作成されます
   - 管理画面でファイル再生テストが可能

### 対応する音声ファイル
- 挨拶・案内メッセージ
- 取引タイプ選択
- 金額入力案内
- 確認メッセージ
- 完了・終了メッセージ

## 本番環境へのデプロイ

### Vercel準備

#### 1. Vercelアカウント作成
1. [Vercel](https://vercel.com/)にアクセス
2. GitHubアカウントでサインアップ（推奨）
3. 無料プランで十分利用可能

#### 2. Access Token取得
1. Vercel Dashboard にログイン
2. [Settings → Tokens](https://vercel.com/account/tokens) に移動
3. 「Create Token」をクリック
4. Token名を入力（例：ChatBot Deploy）
5. 生成されたTokenをコピーして保存

### デプロイ手順

#### 1. デプロイ設定
1. 管理画面の「デプロイ」タブを開く
2. **Vercel設定**を入力：
   - **Access Token**: 取得したTokenを貼り付け
   - **プロジェクト名**: 英数字とハイフンのみ（例：my-chatbot-app）
3. 「接続テスト」で動作確認
4. 「設定を保存」をクリック

#### 2. デプロイ実行
1. 「🚀 Vercelにデプロイ」ボタンをクリック
2. デプロイ進行状況が表示されます
3. 完了すると本番URLが表示されます

### デプロイされる内容

#### ✅ 含まれるもの
- **メインアプリ**: チャットボット機能
- **音声ファイル**: 生成済みの全音声データ
- **設定ファイル**: カスタマイズされた設定
- **多言語対応**: 日本語・英語インターフェース
- **レスポンシブUI**: モバイル・タブレット対応

#### ❌ 除外されるもの
- **管理画面**: セキュリティ上完全に除外
- **開発用ツール**: デバッグ・テスト機能
- **Vercel APIアクセス**: 不正利用防止

### 本番環境の特徴
- **高速配信**: Vercel CDN経由
- **自動HTTPS**: SSL証明書自動適用
- **グローバル展開**: 世界中からアクセス可能
- **管理画面ブロック**: `/management` は404エラー

## チャットボット機能

### エンドユーザー向け機能

#### 1. 言語選択
- 日本語・英語の切り替え
- 音声案内付き

#### 2. 取引タイプ
- **預金・入金**: 口座への入金
- **送金・振込**: 他行・他口座への送金
- **出金**: 現金引き出し
- **その他サービス**: 残高照会等

#### 3. アクセシビリティ
- **大きな文字**: 視認性向上
- **高コントラスト**: 色覚サポート
- **音声ガイド**: 聴覚サポート
- **タッチ操作**: モバイル最適化

#### 4. 進行表示
- 取引進捗の視覚化
- 戻る・進むナビゲーション
- QRコード表示機能

## トラブルシューティング

### よくある問題と解決方法

#### 1. アプリが起動しない
**症状**: `start-chatbot.bat` を実行してもエラーが出る

**解決方法**:
```bash
# Node.jsバージョン確認
node --version
# 18.0以上であることを確認

# 依存関係の再インストール
npm clean-install
```

#### 2. 管理画面にアクセスできない
**症状**: http://localhost:3000/management が404エラー

**解決方法**:
1. `.env.local` ファイルを確認
2. `ENABLE_MANAGEMENT=true` が設定されているか確認
3. 開発サーバーを再起動

#### 3. VOICEVOX接続エラー
**症状**: 音声生成で「接続エラー」が表示される

**解決方法**:
1. VOICEVOXアプリケーションを起動
2. VOICEVOXでAPIサーバーが有効になっているか確認
3. ファイアウォール設定を確認
4. ポート50021が利用可能か確認

#### 4. デプロイエラー
**症状**: Vercelデプロイが失敗する

**解決方法**:
1. **Access Token確認**
   - Tokenが正しくコピーされているか
   - Tokenの有効期限を確認

2. **プロジェクト名確認**
   - 英数字とハイフンのみ使用
   - 既存プロジェクト名と重複していないか

3. **音声ファイル確認**
   - VOICEVOXで音声生成が完了しているか
   - `public/audio/ja/` にファイルが存在するか

#### 5. 音声が再生されない
**症状**: デプロイ後、チャットボットで音声が再生されない

**解決方法**:
1. 音声ファイルが正しく生成されているか確認
2. ブラウザの音声再生許可を確認
3. HTTPSではない場合、音声機能が制限される可能性

### ログの確認方法

#### ローカル環境
```bash
# 開発サーバーのログを確認
npm run dev
# コンソールでエラーメッセージを確認
```

#### Vercel環境
1. [Vercel Dashboard](https://vercel.com/dashboard)にアクセス
2. デプロイしたプロジェクトを選択
3. 「Functions」タブでログを確認

## サポートとフィードバック

### 問題が解決しない場合
1. **エラーメッセージの記録**: 正確なエラー内容をメモ
2. **環境情報の収集**: OS、ブラウザ、Node.jsバージョン
3. **再現手順の整理**: エラーが発生する具体的な操作手順
4. **サポートへの連絡**: 上記情報と合わせて問い合わせ

### ベストプラクティス

#### 1. 定期的なバックアップ
- 設定ファイル (`configuration.json`) をバックアップ
- 音声ファイル (`public/audio/`) をバックアップ

#### 2. デプロイ前の確認事項
- [ ] ローカルでの動作テスト完了
- [ ] 音声ファイル生成完了
- [ ] VOICEVOXが正常動作
- [ ] Vercel接続テスト成功

#### 3. セキュリティ
- Access Tokenは第三者に共有しない
- 定期的なToken更新を推奨
- 不要なデプロイメントは削除

## まとめ

このAIチャットボットシステムにより、技術的な知識がなくても以下が可能になります：

✅ **簡単な起動**: ワンクリックで開発環境開始
✅ **直感的な編集**: GUI操作でコンテンツカスタマイズ
✅ **音声対応**: VOICEVOX連携で自然な音声生成
✅ **ワンクリックデプロイ**: Vercelへの自動デプロイ
✅ **本番運用**: 管理画面なしの安全な本番環境

顧客はこのガイドに従って、独自のチャットボットアプリケーションを作成・運用できます。